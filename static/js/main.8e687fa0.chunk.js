(this.webpackJsonpbrastlewark=this.webpackJsonpbrastlewark||[]).push([[0],{30:function(e,t,r){e.exports={navBar:"NavBar_navBar__1aG85"}},31:function(e,t,r){e.exports={spinner:"Spinner_spinner__PI4kB",spinning:"Spinner_spinning__1ctN0"}},36:function(e,t,r){},61:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(16),c=r.n(s),l=(r(36),r(10)),i=r(2),o=r(9),d=r(4),f=r(13),b=r(0),u=function(e){var t=e.onIntersect,r=e.rootMargin,n=void 0===r?"500px":r,s=Object(a.useRef)(null),c=Object(a.useCallback)((function(e){e.find((function(e){return!0===e.isIntersecting}))&&t()}),[t]);return Object(a.useEffect)((function(){var e=new IntersectionObserver(c,{root:null,threshold:0,rootMargin:n});return s.current&&e.observe(s.current),function(){e.disconnect()}}),[c,n]),Object(b.jsx)("div",{ref:s})};function j(e){return"#"===e.slice(0,1)&&(e=e.slice(1)),3===e.length&&(e=e.split("").map((function(e){return e+e})).join("")),(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white"}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};Object.keys(m);function h(e){return m[e.toLowerCase()]?m[e.toLowerCase()]:e}var x=function(e){var t=e.gnome,r=e.className,a=void 0===r?"":r,n=e.scrollPosition,s=h(t.hair_color),c=j(s),i=function(e,t){e.startsWith("#")&&(e=e.substring(1)),e.length<6&&(e=e.padEnd(6,e.slice(-1)));var r=Math.round(255*Math.min(Math.max(t),1)).toString(16).padStart(2,"0");return"#".concat(e+r)}(s,.75);return Object(b.jsxs)("div",{className:"w-72 bg-white rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-500 will-change-transform ".concat(a),style:{backgroundColor:i,color:c},children:[Object(b.jsx)(f.LazyLoadImage,{wrapperClassName:"rounded-t-xl responsive-img ratio-8-5",alt:"Gnome thumbnail",scrollPosition:n,effect:"blur",width:"100%",src:t.thumbnail},t.id),Object(b.jsxs)("div",{className:"p-3 text-center",children:[Object(b.jsx)("h1",{className:"text-xl font-bold",children:t.name}),Object(b.jsx)("p",{className:"mt-2 text-sm",children:t.professions.join(", ")}),Object(b.jsx)(l.b,{to:"/gnome/".concat(t.id),children:Object(b.jsx)("button",{type:"button",className:"mt-3 py-1 px-10 rounded-lg bg-black bg-opacity-20 text-white tracking-widest border-2 hover:bg-black hover:bg-opacity-30 transition duration-200",children:"Details"})})]})]})},g=r(30),p=r.n(g),O=function(e){var t=e.children;return Object(b.jsxs)("div",{className:"".concat(p.a.navBar," w-full flex flex-row items-center p-2 px-8 justify-between shadow-xs bg-red-500"),children:[Object(b.jsx)("div",{className:"text-xl text-center font-bold text-white sm:flex ".concat(t?"hidden":" "),children:Object(b.jsx)(l.b,{to:"/",children:"Brastlewark"})}),t&&Object(b.jsx)("div",{className:"w-full sm:w-1/3 h-8  flex",children:t}),Object(b.jsx)("div",{})]})},v=["Metalworker","Woodcarver","Stonecarver"," Tinker","Tailor","Potter","Brewer","Medic","Prospector","Gemcutter","Mason","Cook","Baker","Miner","Carpenter","Farmer","Tax inspector","Smelter","Butcher","Sculptor","Blacksmith","Mechanic","Leatherworker","Marble Carver"],w=function(e){var t=e.profession,r=e.setProfession;return Object(b.jsxs)("div",{className:"flex flex-row flex-wrap justify-between md:justify-start items-center",children:[Object(b.jsxs)("div",{className:"font-semibold md:mr-5",children:[Object(b.jsx)("i",{className:"fas fa-sliders-h mr-1"}),"Filters:"]}),Object(b.jsxs)("div",{className:"xm:w-auto sm:px-1 flex flex-row flex-nowrap items-center",children:[Object(b.jsx)("label",{className:"mr-1",htmlFor:"profession",children:"Profession"}),Object(b.jsxs)("select",{id:"profession",className:"filter-select border border-gray-300 px-4 py-1 rounded-lg focus:outline-none max-w-3xl",value:t,onChange:function(e){r(e.target.value)},children:[Object(b.jsx)("option",{className:"border-b",value:"",children:"All"}),v.map((function(e){return Object(b.jsx)("option",{value:e,children:e},e)}))]})]}),Object(b.jsx)("div",{})]})},y=r(31),k=r.n(y),N=function(){return Object(b.jsx)("div",{className:"flex justify-center items-center",title:"Loading",children:Object(b.jsx)("div",{className:"".concat(k.a.spinner," ease-linear rounded-full border-8 border-t-8 border-gray-200 h-32 w-32")})})},P=function(e){var t=e.children;return Object(b.jsx)("div",{className:"text-red-600 bg-red-500 bg-opacity-10 border border-red-400 h-12 flex items-center p-4 rounded-md my-3 block text-left ",role:"alert",children:t})},C=r(19),E=r.n(C);var S=function(e){var t=Object(a.useState)(null),r=Object(o.a)(t,2),n=r[0],s=r[1],c=Object(a.useState)(!0),l=Object(o.a)(c,2),i=l[0],d=l[1],f=Object(a.useState)(null),b=Object(o.a)(f,2),u=b[0],j=b[1];return Object(a.useEffect)((function(){d(!0),s(null),j(null);var t=E.a.CancelToken.source();return E.a.get(e,{cancelToken:t.token}).then((function(e){var t=e.data;s(t)})).catch((function(e){j(e)})).finally((function(){d(!1)})),function(){t.cancel()}}),[e]),{data:n,loading:i,error:u,setError:j}},B={male:["u","o"],female:["a","e","i"]};function M(){return{gnomes:[],loading:!0,error:null}}function L(e,t){switch(t.type){case"setGnomes":return Object(d.a)(Object(d.a)({},e),{},{gnomes:t.payload});case"setLoading":return Object(d.a)(Object(d.a)({},e),{},{loading:t.payload});case"setError":return Object(d.a)(Object(d.a)({},e),{},{error:t.payload});case"reset":return{gnomes:[],loading:!0,error:null};default:throw new Error("You must use a function")}}var _=Object(a.createContext)({state:{gnomes:[],loading:!0,error:null},dispatch:function(){}}),I=function(e){var t=e.children,r="Error retrieving citizens",n=S("https://raw.githubusercontent.com/rrafols/mobile_test/master/data.json"),s=n.data,c=n.loading,l=n.error,i=Object(a.useReducer)(L,null,M),d=Object(o.a)(i,2),f=d[0],u=d[1];return Object(a.useEffect)((function(){if(l)u({type:"setError",payload:r});else if(s)if(null===s||void 0===s?void 0:s.Brastlewark)try{s.Brastlewark.forEach((function(e){var t,r=null===(t=e.name.split(" ")[0].match(/[aAeEiIoOuU]/g))||void 0===t?void 0:t.pop();r&&B.male.includes(r)?e.gender="male":e.gender="female"})),u({type:"setGnomes",payload:s.Brastlewark})}catch(l){console.error(l),u({type:"setError",payload:r})}else u({type:"setError",payload:r});u({type:"setLoading",payload:c})}),[s,l,c]),Object(b.jsx)(_.Provider,{value:{state:f,dispatch:u},children:t})};function q(){return{page:1,perPage:20,maxPages:1}}function F(e,t){switch(t.type){case"setPage":return Object(d.a)(Object(d.a)({},e),{},{page:t.payload});case"setMaxPages":return Object(d.a)(Object(d.a)({},e),{},{maxPages:t.payload});case"nextPage":return e.page<e.maxPages?Object(d.a)(Object(d.a)({},e),{},{page:e.page+1}):e;case"reset":return{page:1,perPage:20,maxPages:1};default:throw new Error("You must use a function")}}var G=Object(f.trackWindowScroll)((function(e){var t=e.scrollPosition,r=Object(a.useReducer)(F,null,q),n=Object(o.a)(r,2),s=n[0],c=n[1],l=Object(a.useContext)(_).state,i=l.error,d=l.loading,f=l.gnomes,j=Object(a.useState)(""),m=Object(o.a)(j,2),h=m[0],g=m[1],p=Object(a.useState)(""),v=Object(o.a)(p,2),y=v[0],k=v[1];Object(a.useEffect)((function(){(null===f||void 0===f?void 0:f.length)>0&&c({type:"setMaxPages",payload:f.length})}),[f.length]);var C,E=!1;if(d)C=Object(b.jsx)(N,{});else if(i)C=Object(b.jsx)(P,{children:i});else{E=!0;var S=f.filter((function(e){var t=!0,r=!0;return h&&(t=e.name.toLocaleLowerCase().includes(h.toLocaleLowerCase())),y&&(r=e.professions.includes(y)),t&&r})).slice(0,function(e,t,r){var a=e*t;return a>r?r-1:a}(s.page,s.perPage,f.length));C=Object(b.jsxs)("div",{className:"self-baseline w-full",children:[Object(b.jsx)("div",{className:"px-4 w-full py-2 border-b-2 border-gray-200",children:Object(b.jsx)(w,{profession:y,setProfession:k})}),Object(b.jsx)("div",{className:"flex flex-row justify-evenly flex-wrap pt-1",children:S.map((function(e){return Object(b.jsx)(x,{gnome:e,scrollPosition:t,className:"m-3"},e.id)}))}),Object(b.jsx)(u,{onIntersect:function(){c({type:"nextPage"})},rootMargin:"1000px"})]})}return Object(b.jsxs)("div",{className:"h-full flex flex-col ",children:[Object(b.jsx)(O,{children:E&&Object(b.jsx)("input",{type:"search",name:"search",placeholder:"Search",className:"flex-grow px-4 rounded-lg focus:outline-none",value:h,onChange:function(e){g(e.target.value),c({type:"setPage",payload:1})}})}),Object(b.jsx)("div",{className:"container mx-auto",children:Object(b.jsx)("div",{className:"flex flex-grow justify-center items-center",children:C})})]})}));function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(Math.round(e+"e"+t)+"e-"+t)}var W=function(e){var t=e.gnome,r=e.children,a=h(t.hair_color),n=j(a);return Object(b.jsxs)("div",{className:"flex flex-col md:flex-row bg-white rounded-lg shadow-lg",children:[Object(b.jsx)("div",{className:"rounded-t-lg md:rounded-t-none md:rounded-l-lg md:w-64 xl:w-80 ratio-8-5 md:ratio-none responsive-img",children:Object(b.jsx)("img",{src:t.thumbnail,alt:"Gnome thumbnail",className:""})}),Object(b.jsxs)("div",{className:"flex-auto p-6 ",children:[Object(b.jsx)("h1",{className:"flex-auto text-2xl font-semibold dark:text-gray-50",children:t.name}),Object(b.jsxs)("div",{className:"mt-2 flex flex-row flex-wrap items-end",children:[Object(b.jsx)("h2",{className:"text-lg mr-2",children:"Age:"}),Object(b.jsx)("span",{children:t.age})]}),Object(b.jsxs)("div",{className:"mt-2 flex flex-row flex-wrap items-end",children:[Object(b.jsx)("h2",{className:"text-lg mr-2",children:"Gender:"}),"male"===t.gender?Object(b.jsx)("i",{className:"fas text-blue-300 mr-1 text-lg fa-mars"}):Object(b.jsx)("i",{className:"fas text-pink-300 mr-1 text-lg fa-venus"}),Object(b.jsx)("span",{children:t.gender})]}),Object(b.jsxs)("div",{className:"mt-2 flex flex-row flex-wrap items-end",children:[Object(b.jsx)("h2",{className:"text-lg mr-2",children:"Weight:"}),Object(b.jsx)("span",{children:T(t.weight)})]}),Object(b.jsxs)("div",{className:"mt-2 flex flex-row flex-wrap items-end",children:[Object(b.jsx)("h2",{className:"text-lg mr-2",children:"Height:"}),Object(b.jsx)("span",{children:T(t.height)})]}),Object(b.jsxs)("div",{className:"mt-2 flex flex-row flex-wrap items-end",children:[Object(b.jsx)("h2",{className:"text-lg mr-2",children:"Hair color:"}),Object(b.jsx)("span",{className:"px-3 rounded-lg",style:{background:a,color:n},children:t.hair_color})]}),Object(b.jsxs)("div",{className:"mt-2 flex flex-row flex-wrap items-end",children:[Object(b.jsx)("h2",{className:"text-lg mr-2",children:"Professions:"}),t.professions.map((function(e,r){var a=r===t.professions.length-1;return Object(b.jsxs)("span",{className:" ".concat(a?"":"mr-1"),children:[e,a?"":", "]},e)}))]}),Object(b.jsxs)("div",{className:"mt-2 flex flex-row flex-wrap items-end",children:[Object(b.jsx)("h2",{className:"text-lg mr-2",children:"Friends:"}),t.friends.length>0?t.friends.map((function(e,r){var a=r===t.friends.length-1;return Object(b.jsxs)("span",{className:" ".concat(a?"":"mr-1"),children:[e,a?"":", "]},e)})):"No friends"]}),r]})]})};var z=function(){var e,t=Object(i.g)().id,r=Object(a.useContext)(_).state,n=r.loading,s=r.error,c=r.gnomes;if(n)e=Object(b.jsx)(N,{});else if(s)e=Object(b.jsx)(P,{children:s});else{var o=c.find((function(e){return e.id.toString()===t}));e=o?Object(b.jsx)(W,{gnome:o,children:Object(b.jsx)("div",{className:"mt-2 flex justify-center",children:Object(b.jsx)(l.b,{to:"/",children:Object(b.jsx)("button",{type:"button",className:"mt-3 py-1 px-10 rounded-lg bg-red-500 text-white tracking-widest border-2 border-red-400 hover:bg-opacity-90 active:bg-red-600 transition duration-200",children:"Back"})})})}):Object(b.jsx)(P,{children:"Gnome not found \ud83d\ude25"})}return Object(b.jsxs)("div",{className:"h-full flex flex-col ",children:[Object(b.jsx)(O,{}),Object(b.jsx)("div",{className:"container mx-auto p-2 sm:p-0 flex-grow",children:Object(b.jsx)("div",{className:"flex flex-grow justify-center items-center h-full",children:e})})]})},A=function(){var e=Object(i.f)().pathname;return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[e]),null};var R=function(){return Object(b.jsx)("div",{className:"bg-gray-50 h-full",children:Object(b.jsxs)(l.a,{children:[Object(b.jsx)(A,{}),Object(b.jsx)(i.c,{children:Object(b.jsxs)(I,{children:[Object(b.jsx)(i.a,{exact:!0,path:"/",children:Object(b.jsx)(G,{})}),Object(b.jsx)(i.a,{path:"/gnome/:id",children:Object(b.jsx)(z,{})})]})})]})})},D=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,62)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))};c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(R,{})}),document.getElementById("root")),D()}},[[61,1,2]]]);
//# sourceMappingURL=main.8e687fa0.chunk.js.map